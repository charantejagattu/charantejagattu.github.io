(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{395:(e,a,l)=>{"use strict";l.d(a,{n:()=>t});var s=l(7523);let t=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,s.iD)(),t={"Content-Type":"application/json",...l&&{Authorization:"Bearer ".concat(l)},...a.headers},n=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1").concat(e),{...a,headers:t});if(401===n.status){let l=await (0,s.J1)();if(l)t.Authorization="Bearer ".concat(l),n=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1").concat(e),{...a,headers:t});else throw Error("Session expired. Please log in again.")}return n}},642:(e,a,l)=>{Promise.resolve().then(l.bind(l,9232))},7523:(e,a,l)=>{"use strict";l.d(a,{J1:()=>r,h_:()=>s,iD:()=>t,zu:()=>i});let s=(e,a,l,s)=>{if(localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",a),localStorage.setItem("userId",l),s)s.email&&localStorage.setItem("userEmail",s.email),s.full_name&&localStorage.setItem("userFullName",s.full_name),s.expires_in&&localStorage.setItem("expiresIn",s.expires_in.toString()),s.token_type&&localStorage.setItem("tokenType",s.token_type);else{let a=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}(e);a&&a.sub&&localStorage.setItem("userId",a.sub)}},t=()=>localStorage.getItem("accessToken"),n=()=>localStorage.getItem("refreshToken"),i=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},r=async()=>{let e=n();if(!e)return null;try{let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/api/v1/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!a.ok)return i(),null;{let l=await a.json();return s(l.access_token,l.refresh_token||e,JSON.stringify({user_id:l.user_id,email:l.email,full_name:l.full_name,expires_in:l.expires_in,token_type:l.token_type})),l.access_token}}catch(e){return console.error("Error refreshing token:",e),i(),null}}},9232:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>r});var s=l(6001),t=l(9973),n=l(395),i=l(7523);function r(){var e;let[a,l]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),[m,u]=(0,t.useState)(!1),[h,b]=(0,t.useState)({name:"",description:"",portfolio_type:"custom",risk_profile:"growth",is_default:!1,is_auto_rebalance:!0,rebalance_frequency:"quarterly",goal_ids:[],target_allocation:{equity:75,debt:15,cash:5,alternative:5}}),[x,j]=(0,t.useState)(!1),[p,v]=(0,t.useState)(""),[g,N]=(0,t.useState)(!1),[f,_]=(0,t.useState)(null),[y,k]=(0,t.useState)(!1),[C,S]=(0,t.useState)(""),[w,A]=(0,t.useState)(!1),[D,I]=(0,t.useState)(null),[q,P]=(0,t.useState)(!1),[T,F]=(0,t.useState)(""),[R,E]=(0,t.useState)(!1),[O,J]=(0,t.useState)(!1),[L,z]=(0,t.useState)(""),[B,H]=(0,t.useState)(null),[G,U]=(0,t.useState)(!1),[V,Y]=(0,t.useState)(!1),[M,K]=(0,t.useState)(""),[Q,W]=(0,t.useState)(null),[X,Z]=(0,t.useState)(!1),[$,ee]=(0,t.useState)(!1),[ea,el]=(0,t.useState)(""),[es,et]=(0,t.useState)(null),[en,ei]=(0,t.useState)(5),[er,eo]=(0,t.useState)(null),[ec,ed]=(0,t.useState)(!1),[em,eu]=(0,t.useState)(""),[eh,eb]=(0,t.useState)([{instrument_name:"",instrument_type:"",units:"",average_buy_price:"",current_price:"",asset_class:"",sector:"",scheme_code:"",folio_number:"",exchange:"",ticker:"",isin:""}]),[ex,ej]=(0,t.useState)(!1),[ep,ev]=(0,t.useState)(""),[eg,eN]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{o(!0),d("");try{let e=await (0,n.n)("/portfolios");if(!e.ok){let a=await e.json();d(a.message||"Failed to fetch portfolios"),o(!1);return}let a=await e.json();l(a)}catch(e){d("Failed to connect to the server")}o(!1)})()},[]);let ef=async e=>{e.preventDefault(),v(""),j(!0);try{let e=localStorage.getItem("userId");if(!e){v("User not authenticated"),j(!1);return}let a={user_id:e,...h},s=await (0,n.n)("/portfolios",{method:"POST",body:JSON.stringify(a)}),t=await s.json();if(!s.ok){v(t.message||"Failed to add portfolio"),j(!1);return}l(e=>[t,...e]),u(!1),b({name:"",description:"",portfolio_type:"custom",risk_profile:"growth",is_default:!1,is_auto_rebalance:!0,rebalance_frequency:"quarterly",goal_ids:[],target_allocation:{equity:75,debt:15,cash:5,alternative:5}})}catch(e){v("Failed to connect to the server")}j(!1)},e_=async e=>{N(!0),_(null),k(!0),S("");try{let a=await (0,n.n)("/portfolios/".concat(e)),l=await a.json();if(!a.ok){S(l.message||"Failed to fetch portfolio"),k(!1);return}_(l)}catch(e){S("Failed to connect to the server")}k(!1)},ey=e=>{var a,l,s,t,n,i,r,o,c;I({id:e.id,name:e.name,description:e.description||"",risk_profile:e.risk_profile,is_default:e.is_default,target_allocation:{equity:null!=(r=null==(l=e.asset_allocation)||null==(a=l.target_allocation)?void 0:a.equity)?r:0,debt:null!=(o=null==(t=e.asset_allocation)||null==(s=t.target_allocation)?void 0:s.debt)?o:0,cash:null!=(c=null==(i=e.asset_allocation)||null==(n=i.target_allocation)?void 0:n.cash)?c:0}}),F(""),A(!0)},ek=async e=>{e.preventDefault(),F(""),P(!0);try{let e={name:D.name,description:D.description,risk_profile:D.risk_profile,is_default:D.is_default,target_allocation:D.target_allocation},a=await (0,n.n)("/portfolios/".concat(D.id),{method:"PUT",body:JSON.stringify(e)}),s=await a.json();if(console.log("the reason is ",{data:s}),!a.ok){F(s.message||"Failed to update portfolio"),P(!1);return}l(e=>e.map(e=>e.id===D.id?{...e,...s}:e)),A(!1)}catch(e){F("Failed to connect to the server")}P(!1)},eC=async e=>{E(!0),J(!0),z(""),H(null);try{let a=await (0,n.n)("/portfolios/analyze?portfolio_id=".concat(e),{method:"POST",body:JSON.stringify({})}),l=await a.json();if(console.log({data:l}),!a.ok){z(l.message||"Failed to analyze portfolio"),J(!1);return}H(l)}catch(e){z("Failed to connect to the server")}J(!1)},eS=e=>{W(e),K(""),U(!0)},ew=async()=>{if(Q){Y(!0),K("");try{let e=await (0,n.n)("/portfolios/".concat(Q),{method:"DELETE"}),a=await e.json();if(!e.ok){K(a.message||"Failed to delete portfolio"),Y(!1);return}l(e=>e.filter(e=>e.id!==Q)),U(!1)}catch(e){K("Failed to connect to the server")}Y(!1)}},eA=e=>{et(e),ei(5),eo(null),el(""),Z(!0)},eD=async e=>{if(e.preventDefault(),es){ee(!0),el(""),eo(null);try{let e=await (0,n.n)("/portfolios/".concat(es,"/rebalance?tolerance_percentage=").concat(en),{method:"POST"}),a=await e.json();if(!e.ok){el(a.message||"Failed to rebalance portfolio"),ee(!1);return}eo(a)}catch(e){el("Failed to connect to the server")}ee(!1)}},eI=async e=>{e.preventDefault(),ev(""),eN(""),ej(!0);try{if(!localStorage.getItem("userId")){ev("User not authenticated"),ej(!1);return}if(!eh.length||!eh[0].instrument_name){ev("Please fill at least one holding."),ej(!1);return}let e=eh.map(e=>({...e,units:Number(e.units),average_buy_price:Number(e.average_buy_price),current_price:Number(e.current_price)})),a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/portfolios/").concat(em,"/holdings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,i.iD)())},body:JSON.stringify(e)}),s=await a.json();if(!a.ok){ev(s.message||"Failed to add holdings"),ej(!1);return}eN("Holdings added successfully!"),l(e=>e.map(e=>e.id===s.id?{...e,...s}:e)),ed(!1),eb([{instrument_name:"",instrument_type:"",units:"",average_buy_price:"",current_price:"",asset_class:"",sector:"",scheme_code:"",folio_number:"",exchange:"",ticker:"",isin:""}])}catch(e){ev("Failed to connect to the server")}ej(!1)},eq=(e,a,l)=>{eb(s=>s.map((s,t)=>t===e?{...s,[a]:l}:s))},eP=e=>eb(eh.filter((a,l)=>l!==e));return(0,s.jsxs)("div",{className:"container mt-4",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,s.jsx)("button",{className:"btn btn-success",onClick:()=>u(!0),children:"Add Portfolio"}),(0,s.jsx)("h2",{className:"mb-0",children:"Portfolios"}),(0,s.jsx)("button",{className:"btn btn-primary",style:{minWidth:160},onClick:()=>{var e;eu((null==(e=a[0])?void 0:e.id)||""),ed(!0),ev(""),eN(""),eb([{instrument_name:"Axis Bluechip Fund",instrument_type:"mutual_fund",units:500.25,average_buy_price:45.75,current_price:48.2,asset_class:"equity",sector:"large_cap",scheme_code:"122541",folio_number:"12345678"},{instrument_name:"HDFC Bank",instrument_type:"stock",units:100,average_buy_price:1450.25,current_price:1625.5,asset_class:"equity",sector:"banking",exchange:"NSE",ticker:"HDFCBANK",isin:"INE040A01034"}])},children:"+ Add Holdings"})]}),r&&(0,s.jsx)("div",{children:"Loading..."}),c&&(0,s.jsx)("div",{className:"alert alert-danger",children:c}),!r&&!c&&(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-bordered align-middle",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Current Value"}),(0,s.jsx)("th",{children:"Invested Value"}),(0,s.jsx)("th",{children:"Gain/Loss %"}),(0,s.jsx)("th",{children:"Risk Profile"}),(0,s.jsx)("th",{children:"Created At"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===a.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"text-center",children:"No portfolios found."})}):a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.current_value}),(0,s.jsx)("td",{children:e.invested_value}),(0,s.jsxs)("td",{children:[e.total_gain_loss_percentage,"%"]}),(0,s.jsx)("td",{children:e.risk_profile}),(0,s.jsx)("td",{children:new Date(e.created_at).toLocaleString()}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{className:"btn btn-link btn-sm",title:"Info",onClick:()=>e_(e.id),children:"ℹ️"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-warning",title:"Edit",onClick:()=>ey(e),children:"✏️"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-info",title:"Analyze",onClick:()=>eC(e.id),children:"\uD83D\uDCCA"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-danger",title:"Delete",onClick:()=>eS(e.id),children:"\uD83D\uDDD1️"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-success",title:"Rebalance",onClick:()=>eA(e.id),children:"♻️"})]})]},e.id))})]})}),m&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:ef,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Add Portfolio"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>u(!1),disabled:x})]}),(0,s.jsxs)("div",{className:"modal-body",children:[p&&(0,s.jsx)("div",{className:"alert alert-danger",children:p}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:h.name,onChange:e=>b({...h,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{className:"form-control",value:h.description,onChange:e=>b({...h,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Risk Profile"}),(0,s.jsxs)("select",{className:"form-select",value:h.risk_profile,onChange:e=>b({...h,risk_profile:e.target.value}),children:[(0,s.jsx)("option",{value:"growth",children:"Growth"}),(0,s.jsx)("option",{value:"balanced",children:"Balanced"}),(0,s.jsx)("option",{value:"conservative",children:"Conservative"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Is Default"}),(0,s.jsx)("input",{type:"checkbox",className:"form-check-input ms-2",checked:h.is_default,onChange:e=>b({...h,is_default:e.target.checked})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Auto Rebalance"}),(0,s.jsx)("input",{type:"checkbox",className:"form-check-input ms-2",checked:h.is_auto_rebalance,onChange:e=>b({...h,is_auto_rebalance:e.target.checked})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Rebalance Frequency"}),(0,s.jsxs)("select",{className:"form-select",value:h.rebalance_frequency,onChange:e=>b({...h,rebalance_frequency:e.target.value}),children:[(0,s.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,s.jsx)("option",{value:"monthly",children:"Monthly"}),(0,s.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Allocation"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Equity",value:h.target_allocation.equity,onChange:e=>b({...h,target_allocation:{...h.target_allocation,equity:Number(e.target.value)}})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Debt",value:h.target_allocation.debt,onChange:e=>b({...h,target_allocation:{...h.target_allocation,debt:Number(e.target.value)}})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Cash",value:h.target_allocation.cash,onChange:e=>b({...h,target_allocation:{...h.target_allocation,cash:Number(e.target.value)}})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Alternative",value:h.target_allocation.alternative,onChange:e=>b({...h,target_allocation:{...h.target_allocation,alternative:Number(e.target.value)}})})})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),disabled:x,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:x,children:x?"Adding...":"Add Portfolio"})]})]})})}),m&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),g&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Portfolio Details"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>N(!1),disabled:y})]}),(0,s.jsxs)("div",{className:"modal-body",children:[y&&(0,s.jsx)("div",{children:"Loading..."}),C&&(0,s.jsx)("div",{className:"alert alert-danger",children:C}),f&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",f.name]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Description:"})," ",f.description]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Risk Profile:"})," ",f.risk_profile]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Portfolio Type:"})," ",f.portfolio_type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Is Default:"})," ",f.is_default?"Yes":"No"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Auto Rebalance:"})," ",f.is_auto_rebalance?"Yes":"No"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Rebalance Frequency:"})," ",f.rebalance_frequency]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Created At:"})," ",new Date(f.created_at).toLocaleString()]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Updated At:"})," ",new Date(f.updated_at).toLocaleString()]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Target Allocation:"}),(0,s.jsx)("pre",{children:JSON.stringify(null==(e=f.asset_allocation)?void 0:e.target_allocation,null,2)})]})]})]})]})})}),g&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),w&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:ek,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Edit Portfolio"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>A(!1),disabled:q})]}),(0,s.jsxs)("div",{className:"modal-body",children:[T&&(0,s.jsx)("div",{className:"alert alert-danger",children:T}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:D.name,onChange:e=>I({...D,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{className:"form-control",value:D.description,onChange:e=>I({...D,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Risk Profile"}),(0,s.jsxs)("select",{className:"form-select",value:D.risk_profile,onChange:e=>I({...D,risk_profile:e.target.value}),children:[(0,s.jsx)("option",{value:"growth",children:"Growth"}),(0,s.jsx)("option",{value:"balanced",children:"Balanced"}),(0,s.jsx)("option",{value:"conservative",children:"Conservative"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Is Default"}),(0,s.jsx)("input",{type:"checkbox",className:"form-check-input ms-2",checked:D.is_default,onChange:e=>I({...D,is_default:e.target.checked})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Allocation"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Equity",value:D.target_allocation.equity,onChange:e=>I({...D,target_allocation:{...D.target_allocation,equity:Number(e.target.value)}})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Debt",value:D.target_allocation.debt,onChange:e=>I({...D,target_allocation:{...D.target_allocation,debt:Number(e.target.value)}})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Cash",value:D.target_allocation.cash,onChange:e=>I({...D,target_allocation:{...D.target_allocation,cash:Number(e.target.value)}})})})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),disabled:q,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:q,children:q?"Saving...":"Save"})]})]})})}),w&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),R&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Portfolio Analysis"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>E(!1),disabled:O})]}),(0,s.jsxs)("div",{className:"modal-body",children:[O&&(0,s.jsx)("div",{children:"Loading..."}),L&&(0,s.jsx)("div",{className:"alert alert-danger",children:L}),B&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",B.name]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Summary:"}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["Total Value: ",B.summary.total_value]}),(0,s.jsxs)("li",{children:["Total Invested: ",B.summary.total_invested]}),(0,s.jsxs)("li",{children:["Total Gain/Loss: ",B.summary.total_gain_loss]}),(0,s.jsxs)("li",{children:["Gain/Loss %:"," ",B.summary.total_gain_loss_percentage,"%"]}),(0,s.jsxs)("li",{children:["Number of Holdings:"," ",B.summary.number_of_holdings]})]})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Asset Allocation:"}),(0,s.jsx)("pre",{children:JSON.stringify(B.asset_allocation,null,2)})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Risk Analysis:"}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["Risk Profile: ",B.risk_analysis.risk_profile]}),(0,s.jsxs)("li",{children:["Risk Score: ",B.risk_analysis.risk_score]}),(0,s.jsxs)("li",{children:["Diversification Score:"," ",B.risk_analysis.diversification_score]}),(0,s.jsxs)("li",{children:["Concentration Risk:"," ",B.risk_analysis.concentration_risk]})]})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Recommendations:"}),(0,s.jsx)("ul",{children:B.recommendations.map((e,a)=>(0,s.jsx)("li",{children:e},a))})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Analyzed At:"})," ",new Date(B.analyzed_at).toLocaleString()]})]})]})]})})}),R&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),G&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Delete Portfolio"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>U(!1),disabled:V})]}),(0,s.jsxs)("div",{className:"modal-body",children:[M&&(0,s.jsx)("div",{className:"alert alert-danger",children:M}),(0,s.jsx)("p",{children:"Are you sure you want to delete this portfolio?"})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>U(!1),disabled:V,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn btn-danger",onClick:ew,disabled:V,children:V?"Deleting...":"Delete"})]})]})})}),G&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),X&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:eD,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Rebalance Portfolio"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>Z(!1),disabled:$})]}),(0,s.jsxs)("div",{className:"modal-body",children:[ea&&(0,s.jsx)("div",{className:"alert alert-danger",children:ea}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Tolerance Percentage"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:en,min:0,max:100,onChange:e=>ei(Number(e.target.value)),required:!0})]}),er&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Recommendations:"}),(0,s.jsxs)("table",{className:"table table-bordered table-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Asset Class"}),(0,s.jsx)("th",{children:"Action"}),(0,s.jsx)("th",{children:"Difference"}),(0,s.jsx)("th",{children:"Amount"})]})}),(0,s.jsx)("tbody",{children:er.recommendations.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.asset_class}),(0,s.jsx)("td",{children:e.action}),(0,s.jsx)("td",{children:e.difference}),(0,s.jsx)("td",{children:e.amount})]},a))})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>Z(!1),disabled:$,children:"Close"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-success",disabled:$,children:$?"Rebalancing...":"Rebalance"})]})]})})}),X&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),ec&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:eI,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Add Holdings to Portfolio"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>ed(!1),disabled:ex})]}),(0,s.jsxs)("div",{className:"modal-body",children:[ep&&(0,s.jsx)("div",{className:"alert alert-danger",children:ep}),eg&&(0,s.jsx)("div",{className:"alert alert-success",children:eg}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Select Portfolio"}),(0,s.jsxs)("select",{className:"form-select",value:em,onChange:e=>eu(e.target.value),required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"-- Select Portfolio --"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),eh.map((e,a)=>(0,s.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,s.jsxs)("div",{className:"row g-2",children:[(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Instrument Name",value:e.instrument_name,onChange:e=>eq(a,"instrument_name",e.target.value),required:!0})}),(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsxs)("select",{className:"form-select",value:e.instrument_type,onChange:e=>eq(a,"instrument_type",e.target.value),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Instrument Type"}),(0,s.jsx)("option",{value:"mutual_fund",children:"Mutual Fund"}),(0,s.jsx)("option",{value:"stock",children:"Stock"})]})}),(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Units",type:"number",value:e.units,onChange:e=>eq(a,"units",e.target.value),required:!0})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Avg Buy Price",type:"number",value:e.average_buy_price,onChange:e=>eq(a,"average_buy_price",e.target.value),required:!0})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Current Price",type:"number",value:e.current_price,onChange:e=>eq(a,"current_price",e.target.value),required:!0})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Asset Class",value:e.asset_class,onChange:e=>eq(a,"asset_class",e.target.value),required:!0})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Sector",value:e.sector,onChange:e=>eq(a,"sector",e.target.value),required:!0})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Scheme Code",value:e.scheme_code||"",onChange:e=>eq(a,"scheme_code",e.target.value)})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Folio Number",value:e.folio_number||"",onChange:e=>eq(a,"folio_number",e.target.value)})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Exchange",value:e.exchange||"",onChange:e=>eq(a,"exchange",e.target.value)})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"Ticker",value:e.ticker||"",onChange:e=>eq(a,"ticker",e.target.value)})}),(0,s.jsx)("div",{className:"col-md-4 mt-2",children:(0,s.jsx)("input",{className:"form-control",placeholder:"ISIN",value:e.isin||"",onChange:e=>eq(a,"isin",e.target.value)})})]}),(0,s.jsx)("div",{className:"mt-2 text-end",children:eh.length>1&&(0,s.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>eP(a),disabled:ex,children:"Remove"})})]},a)),(0,s.jsx)("button",{type:"button",className:"btn btn-link",onClick:()=>eb([...eh,{instrument_name:"",instrument_type:"",units:"",average_buy_price:"",current_price:"",asset_class:"",sector:"",scheme_code:"",folio_number:"",exchange:"",ticker:"",isin:""}]),disabled:ex,children:"+ Add Another Holding"})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>ed(!1),disabled:ex,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:ex||!em,children:ex?"Adding...":"Add Holdings"})]})]})})}),ec&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[192,674,358],()=>a(642)),_N_E=e.O()}]);