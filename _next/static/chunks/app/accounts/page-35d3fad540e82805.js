(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[339],{2249:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(6001),s=a(9973),c=a(8794),l=a(7523);function r(){var e,t,a,r;let[i,o]=(0,s.useState)([]),[d,u]=(0,s.useState)({}),[m,h]=(0,s.useState)(!0),[b,x]=(0,s.useState)(""),[j,p]=(0,s.useState)(!1),[N,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[f,_]=(0,s.useState)(""),[k,S]=(0,s.useState)(null),[C,A]=(0,s.useState)(!1),[w,I]=(0,s.useState)({account_name:"",account_type:"savings",account_number_mask:"N/A",institution_name:"",current_balance:"",currency:"INR",integration_type:"manual"}),[T,D]=(0,s.useState)(!1),[F,E]=(0,s.useState)(""),[B,z]=(0,s.useState)(!1),[O,q]=(0,s.useState)({id:"",account_name:"",current_balance:"",notes:""}),[P,L]=(0,s.useState)(!1),[R,J]=(0,s.useState)(""),[U,G]=(0,s.useState)(!1),[M,W]=(0,s.useState)(""),[Y,H]=(0,s.useState)(null),[K,Q]=(0,s.useState)(null),[V,X]=(0,s.useState)(""),[Z,$]=(0,s.useState)(null),[ee,et]=(0,s.useState)(""),[ea,en]=(0,s.useState)(!1),[es,ec]=(0,s.useState)(""),[el,er]=(0,s.useState)(!1),[ei,eo]=(0,s.useState)(""),[ed,eu]=(0,s.useState)(""),[em,eh]=(0,s.useState)(!1),[eb,ex]=(0,s.useState)(""),[ej,ep]=(0,s.useState)(!1),[eN,eg]=(0,s.useState)(""),[ey,ev]=(0,s.useState)(null),[ef,e_]=(0,s.useState)(!1),[ek,eS]=(0,s.useState)("");(0,s.useEffect)(()=>{eC()},[]);let eC=async()=>{h(!0),x("");try{let e=(0,l.iD)();if(!e){x("Not authenticated heeee"),h(!1);return}let t=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.json();console.log("the detail is ",{data:e}),x(e.message||"Failed to fetch accounts"),h(!1);return}let a=await t.json();o(a)}catch(e){x("Failed to connect to the server")}h(!1)},eA=async()=>{h(!0),x("");try{let e=(0,l.iD)();if(!e){x("Not authenticated"),h(!1);return}let t=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/by-type"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.json();x(e.message||"Failed to fetch accounts by type"),h(!1);return}let a=await t.json();u(a)}catch(e){x("Failed to connect to the server")}h(!1)},ew=async e=>{g(!0),v(!0),_(""),S(null);try{let t=(0,l.iD)();if(!t){_("Not authenticated"),v(!1);return}let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.json();_(e.message||"Failed to fetch account details"),v(!1);return}let n=await a.json();S(n)}catch(e){_("Failed to connect to the server")}v(!1)},eI=()=>{g(!1),S(null),_("")},eT=e=>{let{name:t,value:a}=e.target;I(e=>({...e,[t]:a}))},eD=async e=>{e.preventDefault(),E(""),D(!0);try{let e=(0,l.iD)(),t=localStorage.getItem("userId");if(!e||!t||!w.account_name.trim()||!w.account_type.trim()||!w.account_number_mask.trim()||!w.institution_name.trim()||""===w.current_balance||isNaN(Number(w.current_balance))||!w.currency.trim()||!w.integration_type.trim()){E("All fields are required and must be valid."),D(!1);return}let a={user_id:t,account_name:w.account_name.trim(),account_type:w.account_type.trim(),account_number_mask:w.account_number_mask.trim(),institution_name:w.institution_name.trim(),current_balance:Number(w.current_balance),currency:w.currency.trim(),integration_type:"manual"},n=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/manual"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)}),s=await n.json();if(!n.ok){Array.isArray(s.detail)?E(s.detail.map(e=>e.msg).join(" | ")):"string"==typeof s.detail?E(s.detail):s.message?E(s.message):E("Failed to add account"),D(!1);return}A(!1),I({account_name:"",account_type:"savings",account_number_mask:"N/A",institution_name:"",current_balance:"",currency:"INR",integration_type:"manual"}),eC()}catch(e){E("Failed to connect to the server")}D(!1)},eF=e=>{q({id:e.id,account_name:e.account_name,current_balance:e.current_balance.toString(),notes:""}),J(""),z(!0)},eE=e=>{let{name:t,value:a}=e.target;q(e=>({...e,[t]:a}))},eB=async e=>{e.preventDefault(),J(""),L(!0);try{let e=(0,l.iD)();if(!e){J("Not authenticated"),L(!1);return}if(!O.account_name.trim()||""===O.current_balance||isNaN(Number(O.current_balance))){J("Account name and valid balance are required."),L(!1);return}let t={account_name:O.account_name.trim(),current_balance:Number(O.current_balance),notes:O.notes.trim()},a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/").concat(O.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}),n=await a.json();if(!a.ok){Array.isArray(n.detail)?J(n.detail.map(e=>e.msg).join(" | ")):"string"==typeof n.detail?J(n.detail):n.message?J(n.message):J("Failed to update account"),L(!1);return}z(!1),eC()}catch(e){J("Failed to connect to the server")}L(!1)},ez=async e=>{if(window.confirm("Are you sure you want to delete this account?")){G(!0),W("");try{let t=(0,l.iD)();if(!t){W("Not authenticated"),G(!1);return}let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok){let e=await a.json();W(e.message||"Failed to delete account"),G(!1);return}eC()}catch(e){W("Failed to connect to the server")}G(!1)}},eO=async e=>{Q(e),X("");try{let t=(0,l.iD)();if(!t){X("Not authenticated"),Q(null);return}let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/").concat(e,"/balance"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),n=await a.json();if(!a.ok){X(n.message||"Failed to refresh balance"),Q(null);return}o(t=>t.map(t=>t.id===e?{...t,current_balance:n.current_balance}:t)),k&&k.id===e&&S({...k,current_balance:n.current_balance,available_balance:n.available_balance,last_balance_update:n.last_updated})}catch(e){X("Failed to connect to the server")}Q(null)},eq=async e=>{$(e),et("");try{let t=(0,l.iD)();if(!t){et("Not authenticated"),$(null);return}let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/").concat(e,"/transactions/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),n=await a.json();if(!a.ok){et(n.message||"Failed to update transactions"),$(null);return}}catch(e){et("Failed to connect to the server")}$(null)},eP=async()=>{en(!0),ec("");try{let e=(0,l.iD)();if(!e){ec("Not authenticated"),en(!1);return}let t=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/refresh-all"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();if(!t.ok){ec(a.message||"Failed to refresh all transactions"),en(!1);return}}catch(e){ec("Failed to connect to the server")}en(!1)},eL=async()=>{eo(""),eu(""),ex(""),eh(!0);try{let e=(0,l.iD)(),t=localStorage.getItem("userId");if(!e||!t){ex("Not authenticated"),eh(!1);return}let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/link/token"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({user_id:t})}),n=await a.json();if(!a.ok){ex(n.message||"Failed to generate link token"),eh(!1);return}eo(n.link_token),eu(n.expiration),er(!0)}catch(e){ex("Failed to connect to the server")}eh(!1)},eR=async e=>{e.preventDefault(),ev(null),eS(""),e_(!0);try{let e=(0,l.iD)(),t=localStorage.getItem("userId");if(!e||!t){eS("Not authenticated"),e_(!1);return}let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts/link/exchange"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({public_token:eN,user_id:t})}),n=await a.json();if(!a.ok){eS(n.message||"Failed to exchange public token"),e_(!1);return}ev(n)}catch(e){eS("Failed to connect to the server")}e_(!1)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,n.jsx)("h2",{children:"Accounts"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:"btn btn-success me-2",onClick:()=>A(!0),children:"Add Account"}),(0,n.jsx)("button",{className:"btn btn-dark me-2",onClick:eP,disabled:ea,children:ea?"Refreshing...":"Refresh Transactions"}),(0,n.jsx)("button",{className:"btn btn-info me-2",onClick:eL,disabled:em,children:em?"Generating...":"Generate Link Token"}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>ep(!0),children:"Exchange Public Token"})]})]}),es&&(0,n.jsx)("div",{className:"alert alert-danger",children:es}),eb&&(0,n.jsx)("div",{className:"alert alert-danger",children:eb}),ek&&(0,n.jsx)("div",{className:"alert alert-danger",children:ek}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("button",{className:"btn btn-primary me-2",onClick:()=>{p(!1),eC()},disabled:!j,children:"Show All Accounts"}),(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>{p(!0),eA()},disabled:j,children:"Show Accounts By Type"})]}),m&&(0,n.jsx)("div",{children:"Loading..."}),b&&(0,n.jsx)("div",{className:"alert alert-danger",children:b}),!m&&!b&&!j&&(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsxs)("table",{className:"table table-bordered align-middle",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Institution"}),(0,n.jsx)("th",{children:"Account Name"}),(0,n.jsx)("th",{children:"Type"}),(0,n.jsx)("th",{children:"Balance"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Details"})]})}),(0,n.jsxs)("tbody",{children:[i.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(c.default,{src:null!=(t=e.institution_logo)?t:"/default-logo.png",alt:e.institution_name,width:32,height:32,style:{marginRight:8,verticalAlign:"middle"},unoptimized:!0})}),(0,n.jsx)("td",{children:e.account_name}),(0,n.jsx)("td",{children:e.account_type}),(0,n.jsxs)("td",{children:[e.currency," ",e.current_balance.toLocaleString("en-IN")]}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"active"===e.status?"badge bg-success":"error"===e.status?"badge bg-danger":"badge bg-secondary",children:e.status})}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"btn btn-info btn-sm me-2",onClick:()=>ew(e.id),children:"Details"}),(0,n.jsx)("button",{className:"btn btn-warning btn-sm me-2",onClick:()=>eF(e),children:"Edit"}),(0,n.jsx)("button",{className:"btn btn-danger btn-sm me-2",onClick:()=>ez(e.id),disabled:U,children:U&&Y===e.id?"Deleting...":"Delete"}),(0,n.jsx)("button",{className:"btn btn-secondary btn-sm me-2",onClick:()=>eO(e.id),disabled:K===e.id,title:"Refresh Balance",children:K===e.id?"Refreshing...":"Refresh Balance"}),(0,n.jsx)("button",{className:"btn btn-dark btn-sm",onClick:()=>eq(e.id),disabled:Z===e.id,title:"Update Transactions",children:Z===e.id?"Updating...":"Update Transactions"})]})]},e.id)}),0===i.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"text-center",children:"No accounts found."})})]})]})}),!m&&!b&&j&&(0,n.jsxs)("div",{children:[0===Object.keys(d).length&&(0,n.jsx)("div",{children:"No accounts found by type."}),Object.entries(d).map(e=>{let[t,a]=e;return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("h5",{className:"mb-3 text-capitalize",children:[t," Accounts"]}),(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsxs)("table",{className:"table table-bordered align-middle",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Institution"}),(0,n.jsx)("th",{children:"Account Name"}),(0,n.jsx)("th",{children:"Type"}),(0,n.jsx)("th",{children:"Balance"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Details"})]})}),(0,n.jsx)("tbody",{children:Array.isArray(a)&&a.length>0?a.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[(0,n.jsx)(c.default,{src:null!=(t=e.institution_logo)?t:"/default-logo.png",alt:e.institution_name,width:32,height:32,style:{marginRight:8,verticalAlign:"middle"},unoptimized:!0}),e.institution_name]}),(0,n.jsx)("td",{children:e.account_name}),(0,n.jsx)("td",{children:e.account_type}),(0,n.jsxs)("td",{children:[e.currency," ",e.current_balance.toLocaleString("en-IN")]}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"active"===e.status?"badge bg-success":"error"===e.status?"badge bg-danger":"badge bg-secondary",children:e.status})}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"btn btn-info btn-sm",onClick:()=>ew(e.id),children:"Details"})})]},e.id)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"text-center",children:"No accounts found."})})})]})})]},t)})]}),N&&(0,n.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,n.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"Account Details"}),(0,n.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:eI})]}),(0,n.jsxs)("div",{className:"modal-body",children:[y&&(0,n.jsx)("div",{children:"Loading..."}),f&&(0,n.jsx)("div",{className:"alert alert-danger",children:f}),k&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(c.default,{src:null!=(t=k.institution_logo)?t:"/default-logo.png",alt:k.institution_name,width:48,height:48,style:{marginRight:12,verticalAlign:"middle"},unoptimized:!0}),(0,n.jsx)("span",{style:{fontWeight:600,fontSize:20},children:k.account_name})]}),(0,n.jsx)("table",{className:"table table-bordered",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Account Type"}),(0,n.jsx)("td",{children:k.account_type})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Account Number (Masked)"}),(0,n.jsx)("td",{children:k.account_number_mask})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Institution"}),(0,n.jsx)("td",{children:k.institution_name})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"IFSC Code"}),(0,n.jsx)("td",{children:null!=(a=k.ifsc_code)?a:"-"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Current Balance"}),(0,n.jsxs)("td",{children:[k.currency," ",k.current_balance.toLocaleString("en-IN")]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Available Balance"}),(0,n.jsxs)("td",{children:[k.currency," ",null==(e=k.available_balance)?void 0:e.toLocaleString("en-IN")]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("td",{children:k.status})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Integration Type"}),(0,n.jsx)("td",{children:k.integration_type})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Created At"}),(0,n.jsx)("td",{children:k.created_at})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Updated At"}),(0,n.jsx)("td",{children:k.updated_at})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Notes"}),(0,n.jsx)("td",{children:null!=(r=k.notes)?r:"-"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Exclude from Statistics"}),(0,n.jsx)("td",{children:k.exclude_from_statistics?"Yes":"No"})]})]})})]})]}),(0,n.jsx)("div",{className:"modal-footer",children:(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:eI,children:"Close"})})]})})}),N&&(0,n.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),C&&(0,n.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,n.jsx)("div",{className:"modal-dialog",role:"document",children:(0,n.jsxs)("form",{className:"modal-content",onSubmit:eD,children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"Add Account"}),(0,n.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>A(!1),disabled:T})]}),(0,n.jsxs)("div",{className:"modal-body",children:[F&&(0,n.jsx)("div",{className:"alert alert-danger",children:F}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Account Name"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"account_name",value:w.account_name,onChange:eT,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Account Type"}),(0,n.jsxs)("select",{className:"form-select",name:"account_type",value:w.account_type,onChange:eT,required:!0,children:[(0,n.jsx)("option",{value:"savings",children:"Savings"}),(0,n.jsx)("option",{value:"current",children:"Current"}),(0,n.jsx)("option",{value:"credit",children:"Credit"}),(0,n.jsx)("option",{value:"loan",children:"Loan"})]})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Institution Name"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"institution_name",value:w.institution_name,onChange:eT,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Account Number Mask"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"account_number_mask",value:w.account_number_mask,onChange:eT,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Current Balance"}),(0,n.jsx)("input",{type:"number",className:"form-control",name:"current_balance",value:w.current_balance,onChange:eT,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Currency"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"currency",value:w.currency,onChange:eT,required:!0})]})]}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>A(!1),disabled:T,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:T,children:T?"Adding...":"Add Account"})]})]})})}),C&&(0,n.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),B&&(0,n.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,n.jsx)("div",{className:"modal-dialog",role:"document",children:(0,n.jsxs)("form",{className:"modal-content",onSubmit:eB,children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"Edit Account"}),(0,n.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>z(!1),disabled:P})]}),(0,n.jsxs)("div",{className:"modal-body",children:[R&&(0,n.jsx)("div",{className:"alert alert-danger",children:R}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Account Name"}),(0,n.jsx)("input",{type:"text",className:"form-control",name:"account_name",value:O.account_name,onChange:eE,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Current Balance"}),(0,n.jsx)("input",{type:"number",className:"form-control",name:"current_balance",value:O.current_balance,onChange:eE,required:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Notes"}),(0,n.jsx)("textarea",{className:"form-control",name:"notes",value:O.notes,onChange:eE,rows:2})]})]}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>z(!1),disabled:P,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:P,children:P?"Updating...":"Update Account"})]})]})})}),B&&(0,n.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),el&&(0,n.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,n.jsx)("div",{className:"modal-dialog",role:"document",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"Link Token"}),(0,n.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>er(!1)})]}),(0,n.jsxs)("div",{className:"modal-body",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Token:"}),(0,n.jsx)("div",{className:"alert alert-success mt-2",children:ei})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Expiration:"}),(0,n.jsx)("div",{children:ed})]})]})]})})}),el&&(0,n.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),ej&&(0,n.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,n.jsx)("div",{className:"modal-dialog",role:"document",children:(0,n.jsxs)("form",{className:"modal-content",onSubmit:eR,children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"Exchange Public Token"}),(0,n.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>ep(!1),disabled:ef})]}),(0,n.jsxs)("div",{className:"modal-body",children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Public Token"}),(0,n.jsx)("input",{type:"text",className:"form-control",value:eN,onChange:e=>eg(e.target.value),required:!0})]}),ey&&(0,n.jsxs)("div",{className:"alert alert-success",children:[(0,n.jsxs)("div",{children:["Status: ",ey.status]}),(0,n.jsxs)("div",{children:["Accounts Created: ",ey.accounts_created]}),(0,n.jsxs)("div",{children:["Account IDs:"," ",Array.isArray(ey.account_ids)?ey.account_ids.join(", "):""]})]})]}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>ep(!1),disabled:ef,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:ef,children:ef?"Exchanging...":"Exchange"})]})]})})}),ej&&(0,n.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}})]})}},4993:(e,t,a)=>{Promise.resolve().then(a.bind(a,2249))},7523:(e,t,a)=>{"use strict";a.d(t,{J1:()=>r,h_:()=>n,iD:()=>s,zu:()=>l});let n=(e,t,a,n)=>{if(localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",t),localStorage.setItem("userId",a),n)n.email&&localStorage.setItem("userEmail",n.email),n.full_name&&localStorage.setItem("userFullName",n.full_name),n.expires_in&&localStorage.setItem("expiresIn",n.expires_in.toString()),n.token_type&&localStorage.setItem("tokenType",n.token_type);else{let t=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}(e);t&&t.sub&&localStorage.setItem("userId",t.sub)}},s=()=>localStorage.getItem("accessToken"),c=()=>localStorage.getItem("refreshToken"),l=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},r=async()=>{let e=c();if(!e)return null;try{let t=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/api/v1/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!t.ok)return l(),null;{let a=await t.json();return n(a.access_token,a.refresh_token||e,JSON.stringify({user_id:a.user_id,email:a.email,full_name:a.full_name,expires_in:a.expires_in,token_type:a.token_type})),a.access_token}}catch(e){return console.error("Error refreshing token:",e),l(),null}}}},e=>{var t=t=>e(e.s=t);e.O(0,[794,192,674,358],()=>t(4993)),_N_E=e.O()}]);