(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{395:(e,a,t)=>{"use strict";t.d(a,{n:()=>l});var s=t(7523);let l=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,s.iD)(),l={"Content-Type":"application/json",...t&&{Authorization:"Bearer ".concat(t)},...a.headers},n=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1").concat(e),{...a,headers:l});if(401===n.status){let t=await (0,s.J1)();if(t)l.Authorization="Bearer ".concat(t),n=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1").concat(e),{...a,headers:l});else throw Error("Session expired. Please log in again.")}return n}},3403:(e,a,t)=>{Promise.resolve().then(t.bind(t,5123))},5123:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(6001),l=t(9973),n=t(395),r=t(7523),o=t(2052),i=t(4972);function c(){var e;let[a,t]=(0,l.useState)([]),[i,c]=(0,l.useState)(!0),[d,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(!1),[b,x]=(0,l.useState)({name:"",description:"",goal_type:"home",target_amount:0,current_amount:0,target_date:"",initial_amount:0,icon:"home",priority:"high",contribution_frequency:"monthly",contribution_amount:0,return_rate:7.5,risk_profile:"moderate",portfolio_id:null,account_ids:[]}),[j,g]=(0,l.useState)(!1),[p,v]=(0,l.useState)(""),[N,y]=(0,l.useState)(!1),[f,_]=(0,l.useState)(null),[C,k]=(0,l.useState)(!1),[S,w]=(0,l.useState)(""),[A,D]=(0,l.useState)(!1),[T,I]=(0,l.useState)(null),[F,P]=(0,l.useState)(!1),[q,O]=(0,l.useState)(""),[E,G]=(0,l.useState)(!1),[L,J]=(0,l.useState)(null),[B,M]=(0,l.useState)({amount:"",date:"",source_account_id:"",notes:""}),[R,z]=(0,l.useState)(!1),[U,H]=(0,l.useState)(""),[Q,Y]=(0,l.useState)([]),[Z,$]=(0,l.useState)(!1),[K,V]=(0,l.useState)(null),[W,X]=(0,l.useState)({name:"",target_date:"",target_amount:"",description:""}),[ee,ea]=(0,l.useState)(!1),[et,es]=(0,l.useState)(""),[el,en]=(0,l.useState)(!1),[er,eo]=(0,l.useState)(null),[ei,ec]=(0,l.useState)(null),[ed,em]=(0,l.useState)(!1),[eu,eh]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{c(!0),m("");try{let e=await (0,n.n)("/goals");if(!e.ok){let a=await e.json();m(a.message||"Failed to fetch goals"),c(!1);return}let a=await e.json();t(a)}catch(e){m("Failed to connect to the server")}c(!1)})()},[]);let eb=async()=>{Y([]);try{let e=(0,r.iD)();if(!e)return;let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/accounts"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)return;let t=await a.json();Y(Array.isArray(t)?t.map(e=>({id:e.id,account_name:e.account_name})):[])}catch(e){}},ex=async e=>{e.preventDefault(),v(""),g(!0);try{let e=localStorage.getItem("userId");if(!e){v("User not authenticated"),g(!1);return}let a={user_id:e,...b},s=await (0,n.n)("/goals",{method:"POST",body:JSON.stringify(a)}),l=await s.json();if(console.log("Add Goal Response:",l),!s.ok){Array.isArray(l.detail)?v(l.detail.map(e=>e.msg).join("\n")):v(l.message||"Failed to add goal gappa"),g(!1);return}t(e=>[l,...e]),h(!1),x({name:"",description:"",goal_type:"home",target_amount:0,current_amount:0,target_date:"",initial_amount:0,icon:"home",priority:"high",contribution_frequency:"monthly",contribution_amount:0,return_rate:7.5,risk_profile:"moderate",portfolio_id:null,account_ids:[]})}catch(e){v("Failed to connect to the server")}g(!1)},ej=async e=>{y(!0),_(null),k(!0),w("");try{let a=await (0,n.n)("/goals/".concat(e)),t=await a.json();if(!a.ok){w(t.message||"Failed to fetch goal"),k(!1);return}_(t)}catch(e){w("Failed to connect to the server")}k(!1)},eg=e=>{I({id:e.id,name:e.name,target_amount:e.target_amount,current_amount:e.current_amount,target_date:e.target_date,priority:e.priority,contribution_amount:e.contribution_amount,notes:e.notes||""}),O(""),D(!0)},ep=async e=>{e.preventDefault(),O(""),P(!0);try{let e={name:T.name,target_amount:Number(T.target_amount),current_amount:Number(T.current_amount),target_date:T.target_date,priority:T.priority,contribution_amount:Number(T.contribution_amount),notes:T.notes},a=await (0,n.n)("/goals/".concat(T.id),{method:"PUT",body:JSON.stringify(e)}),s=await a.json();if(!a.ok){O(s.message||"Failed to update goal"),P(!1);return}t(e=>e.map(e=>e.id===T.id?{...e,...s}:e)),D(!1)}catch(e){O("Failed to connect to the server")}P(!1)},ev=e=>{J(e),M({amount:"",date:"",source_account_id:"",notes:""}),H(""),G(!0),eb()},eN=async e=>{e.preventDefault(),z(!0),H("");try{if(!L)return;let e={goal_id:L,amount:Number(B.amount),date:B.date,source_account_id:B.source_account_id,notes:B.notes},a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/goals/").concat(L,"/contributions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,r.iD)())},body:JSON.stringify(e)}),s=await a.json();if(!a.ok){H(s.message||"Failed to add contribution"),z(!1);return}t(e=>e.map(e=>e.id===L?{...e,...s}:e)),G(!1)}catch(e){H("Failed to connect to the server")}z(!1)},ey=e=>{V(e),X({name:"",target_date:"",target_amount:"",description:""}),es(""),$(!0)},ef=async e=>{e.preventDefault(),ea(!0),es("");try{if(!K)return;let e={name:W.name,target_date:W.target_date,target_amount:Number(W.target_amount),description:W.description},a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/goals/").concat(K,"/milestones"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,r.iD)())},body:JSON.stringify(e)}),t=await a.json();if(console.log("Add Milestone Response:",t),!a.ok){es(t.message||"Failed to add milestone"),ea(!1);return}$(!1)}catch(e){es("Failed to connect to the server")}ea(!1)},e_=async e=>{eo(e),em(!0),eh(""),en(!0);try{let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/goals/").concat(e,"/projection"),{headers:{Authorization:"Bearer ".concat((0,r.iD)())}}),t=await a.json();if(!a.ok){eh(t.message||"Failed to fetch projection"),em(!1);return}ec(t)}catch(e){eh("Failed to connect to the server")}em(!1)};return(0,s.jsxs)("div",{className:"container mt-4",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,s.jsx)("button",{className:"btn btn-success",onClick:()=>h(!0),children:"Add Goal"}),(0,s.jsx)("h2",{className:"mb-0",children:"Goals"})]}),i&&(0,s.jsx)("div",{children:"Loading..."}),d&&(0,s.jsx)("div",{className:"alert alert-danger",children:d}),!i&&!d&&(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-bordered align-middle",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Icon"}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Type"}),(0,s.jsx)("th",{children:"Target Amount"}),(0,s.jsx)("th",{children:"Current Amount"}),(0,s.jsx)("th",{children:"Target Date"}),(0,s.jsx)("th",{children:"Completion %"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Priority"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===a.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,className:"text-center",children:"No goals found."})}):a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("span",{role:"img","aria-label":e.icon,children:"home"===e.icon?"\uD83C\uDFE0":"\uD83C\uDFAF"})}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.goal_type}),(0,s.jsx)("td",{children:e.target_amount}),(0,s.jsx)("td",{children:e.current_amount}),(0,s.jsx)("td",{children:new Date(e.target_date).toLocaleDateString()}),(0,s.jsxs)("td",{children:[e.completion_percentage,"%"]}),(0,s.jsx)("td",{children:e.status}),(0,s.jsx)("td",{children:e.priority}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{className:"btn btn-link btn-sm",title:"Info",onClick:()=>ej(e.id),children:"ℹ️"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-warning",title:"Edit",onClick:()=>eg(e),children:"✏️"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-success",title:"Add Contribution",onClick:()=>ev(e.id),children:"\uD83D\uDCB8"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-primary",title:"Add Milestone",onClick:()=>ey(e.id),children:"\uD83C\uDFC1"}),(0,s.jsx)("button",{className:"btn btn-link btn-sm text-info",title:"Projection",onClick:()=>e_(e.id),children:"\uD83D\uDCC8"})]})]},e.id))})]})}),u&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:ex,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Add Goal"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>h(!1),disabled:j})]}),(0,s.jsxs)("div",{className:"modal-body",children:[p&&(0,s.jsx)("div",{className:"alert alert-danger",style:{whiteSpace:"pre-line"},children:p.split("\n").map((e,a)=>(0,s.jsx)("div",{children:e},a))}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:b.name,onChange:e=>x({...b,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{className:"form-control",value:b.description,onChange:e=>x({...b,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Goal Type"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:b.goal_type,onChange:e=>x({...b,goal_type:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:b.target_amount,onChange:e=>x({...b,target_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Initial Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:b.initial_amount,onChange:e=>x({...b,initial_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Current Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:b.current_amount||"",onChange:e=>x({...b,current_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Date"}),(0,s.jsx)("input",{type:"date",className:"form-control",value:b.target_date,onChange:e=>x({...b,target_date:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Priority"}),(0,s.jsxs)("select",{className:"form-select",value:b.priority,onChange:e=>x({...b,priority:e.target.value}),children:[(0,s.jsx)("option",{value:"critical",children:"Critical"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"low",children:"Low"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Contribution Frequency"}),(0,s.jsxs)("select",{className:"form-select",value:b.contribution_frequency,onChange:e=>x({...b,contribution_frequency:e.target.value}),children:[(0,s.jsx)("option",{value:"monthly",children:"Monthly"}),(0,s.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,s.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Contribution Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:b.contribution_amount,onChange:e=>x({...b,contribution_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Return Rate (%)"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:b.return_rate,onChange:e=>x({...b,return_rate:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Risk Profile"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:b.risk_profile,onChange:e=>x({...b,risk_profile:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Icon"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:b.icon,onChange:e=>x({...b,icon:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),disabled:j,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?"Adding...":"Add Goal"})]})]})})}),u&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),N&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Goal Details"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>y(!1),disabled:C})]}),(0,s.jsxs)("div",{className:"modal-body",children:[C&&(0,s.jsx)("div",{children:"Loading..."}),S&&(0,s.jsx)("div",{className:"alert alert-danger",children:S}),f&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",f.name]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Description:"})," ",f.description]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Goal Type:"})," ",f.goal_type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Target Amount:"})," ",f.target_amount]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Target Date:"})," ",new Date(f.target_date).toLocaleDateString()]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Priority:"})," ",f.priority]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Current Amount:"})," ",f.current_amount]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Initial Amount:"})," ",f.initial_amount]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",f.status]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Completion %:"})," ",f.completion_percentage]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Contribution Frequency:"})," ",f.contribution_frequency]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Contribution Amount:"})," ",f.contribution_amount]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Return Rate:"})," ",f.return_rate]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Risk Profile:"})," ",f.risk_profile]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Notes:"})," ",f.notes]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Created At:"})," ",new Date(f.created_at).toLocaleString()]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Updated At:"})," ",new Date(f.updated_at).toLocaleString()]})]})]})]})})}),N&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),A&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:ep,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Edit Goal"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>D(!1),disabled:F})]}),(0,s.jsxs)("div",{className:"modal-body",children:[q&&(0,s.jsx)("div",{className:"alert alert-danger",children:q}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:T.name,onChange:e=>I({...T,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:T.target_amount,onChange:e=>I({...T,target_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Current Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:T.current_amount,onChange:e=>I({...T,current_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Date"}),(0,s.jsx)("input",{type:"date",className:"form-control",value:(null==(e=T.target_date)?void 0:e.slice(0,10))||"",onChange:e=>I({...T,target_date:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Priority"}),(0,s.jsxs)("select",{className:"form-select",value:T.priority,onChange:e=>I({...T,priority:e.target.value}),children:[(0,s.jsx)("option",{value:"critical",children:"Critical"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"low",children:"Low"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Contribution Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:T.contribution_amount,onChange:e=>I({...T,contribution_amount:Number(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Notes"}),(0,s.jsx)("textarea",{className:"form-control",value:T.notes,onChange:e=>I({...T,notes:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>D(!1),disabled:F,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:F,children:F?"Saving...":"Save"})]})]})})}),A&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),E&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:eN,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Add Contribution"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>G(!1),disabled:R})]}),(0,s.jsxs)("div",{className:"modal-body",children:[U&&(0,s.jsx)("div",{className:"alert alert-danger",children:U}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:B.amount,onChange:e=>M({...B,amount:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Date"}),(0,s.jsx)("input",{type:"datetime-local",className:"form-control",value:B.date,onChange:e=>M({...B,date:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Source Account"}),(0,s.jsxs)("select",{className:"form-select",value:B.source_account_id,onChange:e=>M({...B,source_account_id:e.target.value}),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Account"}),Q.map(e=>(0,s.jsx)("option",{value:e.id,children:e.account_name},e.id))]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Notes"}),(0,s.jsx)("textarea",{className:"form-control",value:B.notes,onChange:e=>M({...B,notes:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>G(!1),disabled:R,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:R,children:R?"Adding...":"Add Contribution"})]})]})})}),E&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),Z&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog",role:"document",children:(0,s.jsxs)("form",{className:"modal-content",onSubmit:ef,children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Add Milestone"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>$(!1),disabled:ee})]}),(0,s.jsxs)("div",{className:"modal-body",children:[et&&(0,s.jsx)("div",{className:"alert alert-danger",children:et}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",value:W.name,onChange:e=>X({...W,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Date"}),(0,s.jsx)("input",{type:"date",className:"form-control",value:W.target_date,onChange:e=>X({...W,target_date:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Target Amount"}),(0,s.jsx)("input",{type:"number",className:"form-control",value:W.target_amount,onChange:e=>X({...W,target_amount:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{className:"form-control",value:W.description,onChange:e=>X({...W,description:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>$(!1),disabled:ee,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:ee,children:ee?"Adding...":"Add Milestone"})]})]})})}),Z&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}}),el&&(0,s.jsx)("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Goal Projection"}),(0,s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>en(!1),disabled:ed})]}),(0,s.jsxs)("div",{className:"modal-body",children:[ed&&(0,s.jsx)("div",{children:"Loading..."}),eu&&(0,s.jsx)("div",{className:"alert alert-danger",children:eu}),ei&&(0,s.jsx)("div",{children:(0,s.jsx)(o.N1,{data:{labels:ei.months.map(e=>"Month ".concat(e)),datasets:[{label:"Projected Amount",data:ei.projected_amounts,borderColor:"#36A2EB",backgroundColor:"rgba(54,162,235,0.1)",tension:.3},{label:"Target Line",data:ei.target_line,borderColor:"#FF6384",backgroundColor:"rgba(255,99,132,0.1)",borderDash:[5,5],tension:.3}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0}}},height:300})})]})]})})}),el&&(0,s.jsx)("div",{className:"modal-backdrop fade show",style:{display:"block"}})]})}i.t1.register(i.No,i.FN,i.kc,i.PP,i.s$,i.m_)},7523:(e,a,t)=>{"use strict";t.d(a,{J1:()=>o,h_:()=>s,iD:()=>l,zu:()=>r});let s=(e,a,t,s)=>{if(localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",a),localStorage.setItem("userId",t),s)s.email&&localStorage.setItem("userEmail",s.email),s.full_name&&localStorage.setItem("userFullName",s.full_name),s.expires_in&&localStorage.setItem("expiresIn",s.expires_in.toString()),s.token_type&&localStorage.setItem("tokenType",s.token_type);else{let a=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}(e);a&&a.sub&&localStorage.setItem("userId",a.sub)}},l=()=>localStorage.getItem("accessToken"),n=()=>localStorage.getItem("refreshToken"),r=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},o=async()=>{let e=n();if(!e)return null;try{let a=await fetch("".concat("https://travis-2d4m.onrender.com/api/v1","/api/v1/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!a.ok)return r(),null;{let t=await a.json();return s(t.access_token,t.refresh_token||e,JSON.stringify({user_id:t.user_id,email:t.email,full_name:t.full_name,expires_in:t.expires_in,token_type:t.token_type})),t.access_token}}catch(e){return console.error("Error refreshing token:",e),r(),null}}}},e=>{var a=a=>e(e.s=a);e.O(0,[598,602,192,674,358],()=>a(3403)),_N_E=e.O()}]);